<div class="container mx-auto p-6 max-w-2xl">
  <h2 class="text-2xl font-bold mb-6">Upload de Certificado Digital</h2>
  
  <form [formGroup]="certForm" (ngSubmit)="onSubmit()" class="space-y-4">
    <div>
      <label for="cnpj" class="block text-sm font-medium mb-2">CNPJ</label>
      <input
        id="cnpj"
        type="text"
        formControlName="cnpj"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="00.000.000/0000-00"
      />
      @if (certForm.get('cnpj')?.invalid && certForm.get('cnpj')?.touched) {
        <p class="text-red-500 text-sm mt-1">CNPJ é obrigatório</p>
      }
    </div>

    <div>
      <label for="senha" class="block text-sm font-medium mb-2">Senha do Certificado</label>
      <input
        id="senha"
        type="password"
        formControlName="senha"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="Digite a senha do certificado"
      />
      @if (certForm.get('senha')?.invalid && certForm.get('senha')?.touched) {
        <p class="text-red-500 text-sm mt-1">Senha é obrigatória</p>
      }
    </div>

    <div>
      <label for="certificado" class="block text-sm font-medium mb-2">Arquivo do Certificado</label>
      <input
        id="certificado"
        type="file"
        accept=".pfx,.p12"
        (change)="onFileSelected($event)"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      @if (selectedFile) {
        <p class="text-sm text-gray-600 mt-2">Arquivo selecionado: {{ selectedFile.name }}</p>
      }
    </div>

    <button
      type="submit"
      [disabled]="!certForm.valid || !selectedFile"
      class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"
    >
      Enviar Certificado
    </button>
  </form>

  @if (mensagem) {
    <div class="mt-4 p-4 rounded-md" [ngClass]="mensagem.includes('Erro') ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'">
      {{ mensagem }}
    </div>
  }
</div>

